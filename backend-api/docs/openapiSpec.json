{
    "openapi": "3.0.0",
    "info": {
      "title": "Backend API Documentation",
      "version": "1.0.0",
      "description": "API documentation for the backend service"
    },
    "servers": [
      {
        "url": "http://localhost:3000",
        "description": "Local development server"
      }
    ],
    "security": [
      {
        "BearerAuth": []
      }
    ],
    "paths": {
      "/api/auth/login": {
        "post": {
            "tags": ["Authentication"],
          "summary": "User login",
          "description": "Logs in a user and returns a JWT token",
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "email": { "type": "string" },
                    "password": { "type": "string" }
                  },
                  "required": ["email", "password"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful authentication",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "token": { "type": "string" },
                      "user": {
                        "type": "object",
                        "properties": {
                          "name": { "type": "string" },
                          "email": { "type": "string" },
                          "role": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            },
            "401": { "description": "Unauthorized" }
          }
        }
      },
      "/api/auth/register": {
        "post": {
            "tags": ["Authentication"],
          "summary": "User registration",
          "description": "Registers a new user and returns a JWT token",
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": { "type": "string" },
                    "email": { "type": "string" },
                    "password": { "type": "string" },
                    "role": { "type": "string", "enum": ["user", "admin"] }
                  },
                  "required": ["name", "email", "password"]
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "User registered successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "token": { "type": "string" },
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "email": { "type": "string" },
                          "role": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            },
            "400": { "description": "Bad request" }
          }
        }
      },
      "/api/auth/logout": {
        "post": {
            "tags": ["Authentication"],
          "summary": "Logout",
          "description": "Logs out the current user",
          "responses": {
            "200": {
              "description": "Logged out successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/auth/refresh": {
        "post": {
            "tags": ["Authentication"],
          "summary": "Refresh JWT token",
          "description": "Refreshes the JWT token using an expired token",
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": { "type": "string" }
                  },
                  "required": ["token"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Token refreshed successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "token": { "type": "string" },
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "email": { "type": "string" },
                          "role": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            },
            "401": { "description": "Invalid or expired token" }
          }
        }
      },
      "/api/auth/req_reset": {
        "post": {
          "tags": ["Authentication"],
          "summary": "Request password reset",
          "description": "Sends a password reset email to the user's registered email address",
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "string",
                      "format": "email"
                    }
                  },
                  "required": ["email"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Password reset request sent successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "404": {
              "description": "Email not found"
            }
          }
        }
      },
      "/api/auth/reset_pwd": {
        "post": {
          "tags": ["Authentication"],
          "summary": "Reset password",
          "description": "Resets the user's password using a valid reset token",
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    },
                    "newPassword": {
                      "type": "string",
                      "format": "password"
                    }
                  },
                  "required": ["token", "newPassword"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Password reset successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "400": {
              "description": "Invalid or expired token"
            }
          }
        }
      },

      "/api/users": {
          "get": {
            "tags": ["Users"],
            "summary": "Get all users",
            "description": "Returns a list of all users (admin only or authenticated users depending on your logic)",
            "responses": {
              "200": {
                "description": "List of users",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "email": { "type": "string" },
                          "role": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              },
              "401": { "description": "Unauthorized" }
            }
          }
      },
      "/api/users/me": {
          "get": {
            "tags": ["Users"],
            "summary": "Get current user profile",
            "description": "Returns the profile of the currently authenticated user",
            "responses": {
              "200": {
                "description": "User profile",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "email": { "type": "string" },
                        "role": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "401": { "description": "Unauthorized" }
            }
          }
      },
      "/api/users/{id}": {
          "get": {
            "tags": ["Users"],
            "summary": "Get user by ID",
            "description": "Returns a user by their ID (admin only)",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "responses": {
              "200": {
                "description": "User found",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "email": { "type": "string" },
                        "role": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "401": { "description": "Unauthorized" },
              "403": { "description": "Forbidden" },
              "404": { "description": "User not found" }
            }
          },
          "patch": {
            "tags": ["Users"],
            "summary": "Update user",
            "description": "Update user information by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "email": { "type": "string" },
                      "role": { "type": "string" }
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "User updated successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "email": { "type": "string" },
                        "role": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "400": { "description": "Bad request" },
              "401": { "description": "Unauthorized" },
              "403": { "description": "Forbidden" },
              "404": { "description": "User not found" }
            }
          },
          "delete": {
            "tags": ["Users"],
            "summary": "Delete user",
            "description": "Delete a user by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "responses": {
              "200": { "description": "User deleted successfully" },
              "401": { "description": "Unauthorized" },
              "403": { "description": "Forbidden" },
              "404": { "description": "User not found" }
            }
          }
      },

      "/api/roles": {
          "get": {
            "tags": ["Roles"],
            "summary": "Get all roles",
            "description": "Returns a list of all roles",
            "responses": {
              "200": {
                "description": "List of roles",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "description": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "post": {
            "tags": ["Roles"],
            "summary": "Create a new role",
            "description": "Creates a new role",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "description": { "type": "string" }
                    },
                    "required": ["name"]
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Role created successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "400": { "description": "Bad request" }
            }
          }
      },
      "/api/roles/{id}": {
          "get": {
            "tags": ["Roles"],
            "summary": "Get role by ID",
            "description": "Returns a role by its ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "responses": {
              "200": {
                "description": "Role found",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "404": { "description": "Role not found" }
            }
          },
          "patch": {
            "tags": ["Roles"],
            "summary": "Update role",
            "description": "Update a role by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "description": { "type": "string" }
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Role updated successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "400": { "description": "Bad request" },
              "404": { "description": "Role not found" }
            }
          },
          "delete": {
            "tags": ["Roles"],
            "summary": "Delete role",
            "description": "Delete a role by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "responses": {
              "200": { "description": "Role deleted successfully" },
              "404": { "description": "Role not found" }
            }
          }
      },

      "/api/categories": {
          "get": {
            "tags": ["Categories"],
            "summary": "Get all categories",
            "description": "Returns a list of all categories",
            "responses": {
              "200": {
                "description": "List of categories",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "description": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "post": {
            "tags": ["Categories"],
            "summary": "Create a new category",
            "description": "Creates a new category",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "description": { "type": "string" }
                    },
                    "required": ["name"]
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Category created successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "400": { "description": "Bad request" }
            }
          }
      },
      "/api/categories/{id}": {
          "get": {
      "tags": ["Categories"],
      "summary": "Get category by ID",
      "description": "Returns a single category by its ID",
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer"
          },
          "description": "ID of the category to retrieve"
        }
      ],
      "responses": {
        "200": {
          "description": "Category found",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": { "type": "integer" },
                  "name": { "type": "string" },
                  "description": { "type": "string" }
                }
              }
            }
          }
        },
        "404": {
          "description": "Category not found"
        }
      }
          },
          "patch": {
            "tags": ["Categories"],
            "summary": "Update a category",
            "description": "Update a category by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "description": { "type": "string" }
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Category updated successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              },
              "400": { "description": "Bad request" },
              "404": { "description": "Category not found" }
            }
          },
          "delete": {
            "tags": ["Categories"],
            "summary": "Delete a category",
            "description": "Delete a category by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "responses": {
              "200": { "description": "Category deleted successfully" },
              "404": { "description": "Category not found" }
            }
          }
      },

      "/api/products": {
        "get": {
          "tags": ["Products"],
          "summary": "Get all products",
          "description": "Returns a list of all products with pagination",
          "parameters": [
            {
              "name": "page",
              "in": "query",
              "schema": { "type": "integer", "default": 1 }
            },
            {
              "name": "limit",
              "in": "query",
              "schema": { "type": "integer", "default": 5 }
            }
          ],
          "responses": {
            "200": {
              "description": "List of products",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": { "type": "string", "example": "success" },
                      "data": {
                        "type": "object",
                        "properties": {
                          "products": {
                            "type": "array",
                            "items": {
                              "$ref": "#/components/schemas/Product"
                            }
                          },
                          "metadata": {
                            "type": "object",
                            "properties": {
                              "totalRecords": { "type": "integer" },
                              "firstPage": { "type": "integer" },
                              "lastPage": { "type": "integer" },
                              "page": { "type": "integer" },
                              "limit": { "type": "integer" }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": ["Products"],
          "summary": "Create a new product",
          "security": [{ "bearerAuth": [] }],
          "requestBody": {
            "required": true,
            "content": {
              "multipart/form-data": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": { "type": "string" },
                    "description": { "type": "string" },
                    "price": { "type": "number" },
                    "categoryId": { "type": "integer" },
                    "image": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "required": ["name", "description", "price", "categoryId"]
                }
              }
            }
          },
          "responses": {
            "201": { "description": "Product created" },
            "400": { "description": "Validation failed" }
          }
        }
      },
      "/api/products/search": {
        "get": {
          "tags": ["Products"],
          "summary": "Search products",
          "parameters": [
            {
              "name": "query",
              "in": "query",
              "schema": { "type": "string" }
            }
          ],
          "responses": {
            "200": {
              "description": "Filtered list of products",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/ProductListResponse" }
                }
              }
            }
          }
        }
      },
      "/api/products/category/{categoryId}": {
        "get": {
          "tags": ["Products"],
          "summary": "Get products by category",
          "parameters": [
            {
              "name": "categoryId",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "List of products in the category",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/ProductListResponse" }
                }
              }
            }
          }
        }
      },
      "/api/products/{id}": {
        "get": {
          "tags": ["Products"],
          "summary": "Get product by ID",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "Product found",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/Product" }
                }
              }
            },
            "404": { "description": "Product not found" }
          }
        },
        "patch": {
          "tags": ["Products"],
          "summary": "Update product",
          "security": [{ "bearerAuth": [] }],
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "requestBody": {
            "required": false,
            "content": {
              "multipart/form-data": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": { "type": "string" },
                    "description": { "type": "string" },
                    "price": { "type": "number" },
                    "categoryId": { "type": "integer" },
                    "image": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": { "description": "Product updated successfully" },
            "404": { "description": "Product not found" }
          }
        },
        "delete": {
          "tags": ["Products"],
          "summary": "Delete product",
          "security": [{ "bearerAuth": [] }],
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": { "description": "Product deleted successfully" },
            "404": { "description": "Product not found" }
          }
        }
      },

      "/api/orders": {
          "get": {
            "tags": ["Orders"],
            "summary": "Get all orders", 
            "description": "Returns a list of all orders (admin only or authenticated users depending on your logic)",
            "responses": {
              "200": {
                "description": "List of orders",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "userId": { "type": "integer" },
                          "totalAmount": { "type": "number" },
                          "status": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              },
              "401": { "description": "Unauthorized" }  
            }
          },
          "post": {
            "tags": ["Orders"],
            "summary": "Create a new order",
            "description": "Creates a new order",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "userId": { "type": "integer" },
                      "items": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "productId": { "type": "integer" },
                            "quantity": { "type": "integer" }
                          },
                          "required": ["productId", "quantity"]
                        }
                      },
                      "totalAmount": { "type": "number" }
                    },
                    "required": ["userId", "items", "totalAmount"]
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Order created successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              },
              "400": { 
                "description": "Bad request" 
              }
            }
          }
      },
      "/api/orders/{id}": {
          "get": {
            "tags": ["Orders"],
            "summary": "Get order by ID",
            "description": "Returns an order by its ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "responses": {
              "200": {
                "description": "Order found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              },
              "404": { "description": "Order not found" }
            }
          },
          "put": {
            "tags": ["Orders"],
            "summary": "Update order",
            "description": "Update an order by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Order"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Order updated successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              },
              "400": { "description": "Bad request" },
              "404": { "description": "Order not found" }
            }
          }
      },
      "/api/orders/user/{userId}": {
        "get": {
          "tags": ["Orders"],
          "summary": "Get orders by user ID",
          "description": "Returns a list of orders for a specific user",
          "parameters": [
            {
              "name": "userId",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "List of user orders",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/Order" }
                  }
                }
              }
            },
            "404": { "description": "No orders found for the user" }
          }
        }
      },
      "/api/orders/{id}/items": {
        "get": {
          "tags": ["Order Items"],
          "summary": "Get all items in an order",
          "description": "Returns all products in the specified order",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "List of order items",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/OrderItem" }
                  }
                }
              }
            },
            "404": { "description": "Order or items not found" }
          }
        },
        "post": {
            "tags": ["Order Items"],
            "summary": "Add item to order",
            "description": "Creates a new order item in the specified order",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": { "type": "integer" }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "productId": { "type": "integer" },
                      "quantity": { "type": "integer" },
                      "price": { "type": "number" }
                    },
                    "required": ["productId", "quantity"]
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Order item created",
                "content": {
                  "application/json": {
                    "schema": { "$ref": "#/components/schemas/OrderItem" }
                  }
                }
              },
              "400": { "description": "Bad request" }
            }
        }
      },
      "/api/orders/order_items/{id}": {
        "get": {
          "tags": ["Order Items"],
          "summary": "Get order item by ID",
          "description": "Returns a specific item in an order",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "Order item found",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/OrderItem" }
                }
              }
            },
            "404": { "description": "Order item not found" }
          }
        },
        "put": {
          "tags": ["Order Items"],
          "summary": "Update order item",
          "description": "Updates an item in an order",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/OrderItem" }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Order item updated",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/OrderItem" }
                }
              }
            },
            "400": { "description": "Bad request" },
            "404": { "description": "Item not found" }
          }
        },
        "delete": {
          "tags": ["Order Items"],
          "summary": "Delete order item",
          "description": "Deletes an item from the order",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "204": { "description": "Order item deleted" },
            "404": { "description": "Item not found" }
          }
        }
      },
      "/api/orders/{id}/status": {
        "patch": {
          "tags": ["Orders"],
          "summary": "Update order status",
          "description": "Allows updating only the status of an order",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": ["pending", "processing", "shipped", "delivered", "cancelled"]
                    }
                  },
                  "required": ["status"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Order status updated successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/Order"
                  }
                }
              }
            },
            "400": { "description": "Invalid status value" },
            "404": { "description": "Order not found" }
          }
        }
      },
      "/api/payments": {
        "get": {
          "tags": ["Payments"],
          "summary": "Lấy tất cả các thanh toán",
          "security": [{ "BearerAuth": [] }],
          "responses": {
            "200": {
              "description": "Danh sách các thanh toán",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/Payment" }
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": ["Payments"],
          "summary": "Tạo thanh toán mới",
          "security": [{ "BearerAuth": [] }],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Payment" }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Tạo thanh toán thành công",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/Payment" }
                }
              }
            },
            "400": { "description": "Dữ liệu không hợp lệ" }
          }
        }
      },
      "/api/payments/{id}": {
        "get": {
          "tags": ["Payments"],
          "summary": "Lấy thanh toán theo ID",
          "security": [{ "BearerAuth": [] }],
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "Chi tiết thanh toán",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/Payment" }
                }
              }
            },
            "404": { "description": "Không tìm thấy thanh toán" }
          }
        },
        "patch": {
          "tags": ["Payments"],
          "summary": "Cập nhật trạng thái thanh toán",
          "security": [{ "BearerAuth": [] }],
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PartialPayment"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Cập nhật thành công",
              "content": {
                "application/json": {
                  "schema": { "$ref": "#/components/schemas/Payment" }
                }
              }
            },
            "400": { "description": "Dữ liệu không hợp lệ" },
            "404": { "description": "Không tìm thấy thanh toán" }
          }
        }
      },
      "/api/payments/user/{userId}": {
        "get": {
          "tags": ["Payments"],
          "summary": "Lấy danh sách thanh toán của người dùng",
          "security": [{ "BearerAuth": [] }],
          "parameters": [
            {
              "name": "userId",
              "in": "path",
              "required": true,
              "schema": { "type": "integer" }
            }
          ],
          "responses": {
            "200": {
              "description": "Danh sách thanh toán của người dùng",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/Payment" }
                  }
                }
              }
            },
            "404": { "description": "Không tìm thấy người dùng" }
          }
        }
      }
    },
      "components": {
        "schemas": {
          "Product": {
            "type": "object",
            "properties": {
              "id": { "type": "integer" },
              "name": { "type": "string" },
              "description": { "type": "string" },
              "price": { "type": "number" },
              "categoryId": { "type": "integer" },
              "image_url": { "type": "string" }
            }
          },
          "ProductListResponse": {
            "type": "object",
            "properties": {
              "status": { "type": "string" },
              "data": {
                "type": "object",
                "properties": {
                  "products": {
                    "type": "array",
                    "items": { "$ref": "#/components/schemas/Product" }
                  },
                  "metadata": {
                    "type": "object",
                    "properties": {
                      "totalRecords": { "type": "integer" },
                      "firstPage": { "type": "integer" },
                      "lastPage": { "type": "integer" },
                      "page": { "type": "integer" },
                      "limit": { "type": "integer" }
                    }
                  }
                }
              }
            }
          },
          "Payment": {
              "type": "object",
              "properties": {
                "order_id": { "type": "integer", "example": 1 },
                "amount": { "type": "number", "example": 250000 },
                "status": {
                  "type": "string",
                  "enum": ["pending", "paid", "failed", "refunded"],
                  "example": "pending"
                },
                "payment_method": { "type": "string", "example": "momo" }
              },
              "required": ["order_id", "amount", "payment_method"]
          },
          "PartialPayment": {
              "type": "object",
              "properties": {
                "order_id": { "type": "integer", "example": 1 },
                "amount": { "type": "number", "example": 250000 },
                "status": {
                  "type": "string",
                  "enum": ["pending", "paid", "failed", "refunded"]
                },
                "payment_method": { "type": "string", "example": "momo" }
              }
          },
          "securitySchemes": {
          "bearerAuth": {
            "type": "http",
            "scheme": "bearer",
            "bearerFormat": "JWT"
          }
          },
          "Order": {
                "type": "object",
                "properties": {
                  "id": { "type": "integer", "example": 1 },
                  "userId": { "type": "integer", "example": 42 },
                  "totalAmount": { "type": "number", "example": 199.99 },
                  "status": {
                    "type": "string",
                    "enum": ["pending", "processing", "shipped", "delivered", "cancelled"],
                    "example": "pending"
                  },
                  "createdAt": { "type": "string", "format": "date-time" },
                  "updatedAt": { "type": "string", "format": "date-time" }
                },
                "required": ["userId", "totalAmount", "status"]
              },
          "OrderItem": {
            "type": "object",
            "properties": {
              "id": { "type": "integer", "example": 1 },
              "orderId": { "type": "integer", "example": 101 },
              "productId": { "type": "integer", "example": 23 },
              "quantity": { "type": "integer", "example": 2 },
              "price": { "type": "number", "example": 49.99 }
            },
            "required": ["orderId", "productId", "quantity", "price"]
          }
        }
      }
      }
  

